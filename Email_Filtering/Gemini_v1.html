<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Email Filter - Avatar Flow - RomAIx</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap');

        :root {
            /* --- Branding Colors --- */
            --primary-color: #587C74;   /* Teal green - Used for Relevant/Highlight */
            --secondary-color: #2F3E46; /* Dark blue-grey - Used for UI/Structure */
            /* --- Supporting Colors --- */
            --bg-color: #eef2f5;        /* Fallback background */
            --ui-bg: #ffffff;           /* Inbox background */
            --border-color: #e5e7eb;    /* Light borders */
            --filtered-area-bg: #f8fafc; /* Very light grey for filtered area */
            --filtered-color: #9ca3af;  /* Muted grey for filtered text/icons */
            --scan-pulse-color: #a7f3d0; /* Light green pulse */
            --text-dark: #1f2937;
            --text-light: #f9fafb;
            --reject-color: #f87171; /* Lighter Red for reject flash/border */
            --accept-color: #4ade80; /* Lighter Green for accept flash/border */
            --avatar-size: 60px;
            --avatar-border-width: 4px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            /* --- Background Image --- */
            background-image: url('LinkedInBackground.png'); /* Use uploaded file */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: var(--bg-color); /* Fallback solid color */
            background-attachment: fixed; /* Prevent scrolling with content */

            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            padding: 20px;
            position: relative; /* Needed for overlay */
        }

        /* Optional overlay for better contrast */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.1); /* Slight dark overlay */
            z-index: -1; /* Place behind content */
        }


        .animation-title {
            font-size: 26px; /* Slightly larger */
            font-weight: 700;
            color: var(--text-light); /* White text for contrast on bg */
            margin-bottom: 25px;
            text-align: center;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.4); /* Add shadow for readability */
        }

        .inbox-container {
            width: 100%;
            max-width: 550px;
            height: 600px;
            background-color: var(--ui-bg);
            border-radius: 16px; /* More rounded */
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2); /* Stronger shadow */
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255,255,255,0.2); /* Subtle border */
        }

        /* --- Top Area for Incoming Emails & Filter --- */
        .processing-area {
            height: 180px;
            position: relative;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
            overflow: hidden;
            background: linear-gradient(180deg, #f9fafb, #ffffff); /* Subtle gradient */
        }

        .incoming-label {
             position: absolute;
             top: 15px;
             left: 50%;
             transform: translateX(-50%);
             font-size: 12px;
             font-weight: 600;
             color: var(--secondary-color);
             opacity: 0.9;
             text-transform: uppercase;
             letter-spacing: 0.5px;
        }

        /* AI Avatar */
        .ai-avatar {
            width: var(--avatar-size);
            height: var(--avatar-size);
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color)); /* Brand gradient */
            position: absolute;
            bottom: 20px; /* Position above content area */
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            /* Border used for status indication */
            border: var(--avatar-border-width) solid transparent;
            transition: border-color 0.3s ease;
            /* Placeholder for image - replace background with url('your-image.png') */
             background-image: url('HalfAgent.svg'); /* Placeholder */
             background-size: cover;
             background-position: center;
        }

        /* Status Indicator Overlay (Check/Cross) */
        .avatar-status-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border-radius: 50%;
            background-color: rgba(0,0,0,0.5); /* Semi-transparent overlay */
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0.5);
            transition: opacity 0.3s ease, transform 0.3s ease;
            pointer-events: none; /* Allow clicks through if needed */
        }
        .avatar-status-overlay svg {
            width: 60%;
            height: 60%;
            fill: var(--text-light);
        }
        .ai-avatar.accept .avatar-status-overlay {
            background-color: rgba(74, 222, 128, 0.7); /* Green overlay */
            opacity: 1;
            transform: scale(1);
        }
        .ai-avatar.reject .avatar-status-overlay {
            background-color: rgba(248, 113, 113, 0.7); /* Red overlay */
            opacity: 1;
            transform: scale(1);
        }

        /* Pulsing border animation */
        .ai-avatar.scanning {
            animation: pulseBorder 1s infinite ease-in-out;
        }
        @keyframes pulseBorder {
            0%, 100% { border-color: transparent; }
            50% { border-color: var(--scan-pulse-color); box-shadow: 0 0 15px var(--scan-pulse-color); }
        }
        /* Static border colors for decision */
        .ai-avatar.accept {
            border-color: var(--accept-color);
        }
        .ai-avatar.reject {
            border-color: var(--reject-color);
        }


        /* --- Main Content Area (Actionable & Filtered) --- */
        .content-area {
            flex-grow: 1;
            display: flex;
            position: relative;
            overflow: hidden;
        }

        /* Actionable Emails List */
        .actionable-column {
            flex-grow: 1;
            padding: 15px;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow-y: auto;
            /* Subtle pattern */
            /* background-image: radial-gradient(var(--border-color) 1px, transparent 1px);
            background-size: 10px 10px; */
        }
         .actionable-column-title {
             font-size: 15px; /* Slightly larger title */
             font-weight: 700; /* Bolder */
             color: var(--primary-color);
             margin-bottom: 10px;
             padding-bottom: 5px;
             border-bottom: 3px solid var(--primary-color); /* Thicker border */
             text-align: center;
             flex-shrink: 0;
         }


        /* Filtered Emails Area */
        .filtered-column {
            width: 130px;
            background-color: var(--filtered-area-bg);
            border-left: 1px solid var(--border-color);
            padding: 15px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex-shrink: 0;
            overflow-y: auto;
            transition: background-color 0.3s ease;
        }
         .filtered-column-title {
             font-size: 12px; /* Larger */
             font-weight: 700; /* Bolder */
             color: var(--filtered-color);
             margin-bottom: 15px;
             text-transform: uppercase;
             letter-spacing: 0.5px;
             display: flex;
             align-items: center;
             gap: 5px;
             flex-shrink: 0;
         }
          .filtered-column-title svg {
              width: 16px; /* Larger icon */
              height: 16px;
              fill: currentColor;
          }


        /* Email Item Visual */
        .email-item {
            width: 85%;
            max-width: 300px;
            height: 60px;
            background-color: var(--ui-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px; /* More rounded */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Enhanced shadow */
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%) scale(1); /* Start at normal scale */
            z-index: 5;
            cursor: default;
            display: flex;
            align-items: center;
            padding: 8px 12px;
            gap: 10px;
            overflow: hidden;
            /* Updated transitions */
            transition: top 0.7s cubic-bezier(0.68, -0.55, 0.27, 1.55), /* Ease with overshoot */
                        left 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55),
                        transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55),
                        opacity 0.5s ease-out,
                        background-color 0.3s ease,
                        border-color 0.3s ease;
        }
         .email-item.relevant {
             border-left: 5px solid var(--primary-color);
         }
         .email-item.irrelevant {
             border-left: 5px solid var(--filtered-color);
         }
         /* Style for emails in the filtered column */
         .filtered-column .email-item {
             position: relative;
             width: 100%;
             height: 45px;
             left: auto;
             top: auto;
             transform: none;
             margin-bottom: 8px;
             opacity: 0.7;
             padding: 5px 8px;
             gap: 5px;
             box-shadow: 0 1px 3px rgba(0,0,0,0.07);
             border-left-width: 4px; /* Thinner border in list */
         }


        .email-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }
         .email-icon svg { fill: currentColor; }
         .filtered-column .email-icon { width: 14px; height: 14px; }

        .email-details {
            flex-grow: 1;
            overflow: hidden;
        }

        .email-subject {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 3px;
        }
         .filtered-column .email-subject { font-size: 11px; margin-bottom: 1px;}

        .email-sender {
            font-size: 11px;
            color: #6b7280;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
         .filtered-column .email-sender { font-size: 10px; }


        /* Counters */
        .counters {
            display: flex;
            justify-content: space-around;
            padding: 15px 20px; /* More padding */
            border-top: 1px solid var(--border-color);
            background-color: #f9fafb;
            flex-shrink: 0;
        }
        .counter {
            text-align: center;
            font-size: 12px; /* Slightly larger label */
            color: #6b7280;
            font-weight: 600; /* Bolder label */
        }
        .counter span {
            display: block;
            font-size: 20px; /* Larger counter */
            font-weight: 700;
            margin-bottom: 3px;
        }
        #relevant-counter span { color: var(--primary-color); }
        #filtered-counter span { color: var(--filtered-color); }
        #processed-counter span { color: var(--secondary-color); }

        /* Animation States */
        .email-item.entering { /* State as it moves to the avatar */
            top: 100px; /* Target position just above the avatar */
            opacity: 1;
            transform: translateX(-50%) scale(1.1); /* Slightly larger as it approaches */
        }
        .email-item.scanning { /* State while being scanned */
             top: 100px;
             z-index: 15; /* Bring above avatar */
             transform: translateX(-50%) scale(1.1);
        }
        .email-item.accepted { /* State when moving to actionable list */
             top: 195px; /* Move down past the avatar into the next area */
             opacity: 1;
             transform: translateX(-50%) scale(1); /* Return to normal scale */
             /* Left remains centered until placed in list */
        }
        .email-item.rejected { /* State when moving to filtered column */
            top: 105px; /* Stay near avatar level */
            left: calc(100% - 65px); /* Move to the center of the filtered column */
            transform: translateX(-50%) scale(0.6) rotate(8deg); /* Shrink more, rotate more */
            opacity: 0; /* Fade out during transition */
            z-index: 5;
        }
         /* Flash effect for filtered column */
         .filtered-column.flash {
             animation: flashBg 0.4s ease-out;
         }
         @keyframes flashBg {
             0%, 100% { background-color: var(--filtered-area-bg); }
             50% { background-color: var(--reject-color); opacity: 0.3; } /* Use reject color */
         }


        /* Responsive */
        @media screen and (max-width: 600px) {
            .animation-title { font-size: 22px; margin-bottom: 20px; }
            .inbox-container { height: 550px; }
            .processing-area { height: 160px; }
            :root { --avatar-size: 55px; } /* Smaller avatar */
            .ai-avatar { bottom: 15px; }
            .email-item.entering, .email-item.scanning { top: 85px; }
            .email-item.accepted { top: 175px; }
            .email-item.rejected { top: 90px; left: calc(100% - 55px); }
            .filtered-column { width: 110px; }
            .counters span { font-size: 18px; }
            .counter { font-size: 11px; }
        }
         @media screen and (max-width: 480px) {
             .animation-title { font-size: 20px; }
             .inbox-container { height: 500px; max-width: 95%; }
             .processing-area { height: 140px; }
              :root { --avatar-size: 50px; } /* Even smaller avatar */
             .ai-avatar { bottom: 10px; }
             .email-item { height: 55px; gap: 8px; padding: 6px 10px;}
             .email-icon { width: 18px; height: 18px;}
             .email-subject { font-size: 12px; }
             .email-sender { font-size: 10px; }
             .email-item.entering, .email-item.scanning { top: 70px; }
             .email-item.accepted { top: 155px; }
             .filtered-column { width: 100px; padding: 10px 5px;}
             .filtered-column-title { font-size: 10px; gap: 3px; margin-bottom: 10px;}
             .filtered-column-title svg { width: 12px; height: 12px;}
             .email-item.rejected { top: 75px; left: calc(100% - 50px); } /* Adjust position */
             .filtered-column .email-item { height: 40px; padding: 4px 6px; gap: 4px;}
             .filtered-column .email-icon { width: 12px; height: 12px;}
             .filtered-column .email-subject { font-size: 10px;}
             .filtered-column .email-sender { font-size: 9px;}
             .counters span { font-size: 16px; }
         }

    </style>
</head>
<body>
    <div class="animation-title">RomAIx AI Email Filtering Process</div>

    <div class="inbox-container">
        <div class="processing-area" id="processing-area">
            <div class="incoming-label">Incoming Emails</div>
            <div class="ai-avatar" id="ai-avatar">
                <div class="avatar-status-overlay" id="avatar-status-overlay">
                    </div>
            </div>
            </div>

        <div class="content-area">
            <div class="actionable-column" id="actionable-column">
                 <div class="actionable-column-title">Actionable Emails</div>
                 </div>
            <div class="filtered-column" id="filtered-column">
                 <div class="filtered-column-title">
                     <svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                     Filtered
                 </div>
                 </div>
        </div>

        <div class="counters">
            <div class="counter" id="processed-counter">
                <span >0</span>Processed
            </div>
            <div class="counter" id="relevant-counter">
                <span >0</span>Relevant
            </div>
            <div class="counter" id="filtered-counter">
                <span >0</span>Filtered
            </div>
        </div>
    </div>

    <script>
        // --- Configuration ---
        const CONFIG = {
            spawnInterval: 1900, // Slightly adjusted interval
            timeToAvatar: 900,    // Time for email to travel to the avatar
            scanTime: 700,        // Time the avatar pulses/scans
            decisionPause: 250,   // Short pause after scan before moving
            moveToInboxTime: 800, // Time for relevant email to slide into inbox
            rejectTime: 700,      // Time for irrelevant email to slide/fade out
            maxFilteredEmails: 5,
            maxActionableEmails: 6
        };

        // --- DOM Elements ---
        const elements = {
            processingArea: document.getElementById('processing-area'),
            aiAvatar: document.getElementById('ai-avatar'),
            avatarStatusOverlay: document.getElementById('avatar-status-overlay'),
            actionableColumn: document.getElementById('actionable-column'),
            filteredColumn: document.getElementById('filtered-column'),
            processedCounter: document.querySelector('#processed-counter span'),
            relevantCounter: document.querySelector('#relevant-counter span'),
            filteredCounter: document.querySelector('#filtered-counter span'),
        };

        // --- SVG Icons ---
        const ICONS = {
             accept: `<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>`,
             reject: `<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>`
        };

        // --- State ---
        let processedCount = 0;
        let relevantCount = 0;
        let filteredCount = 0;
        let emailIdCounter = 0;
        const actionableEmails = [];
        const filteredEmails = [];

        // --- Utility ---
        const delay = ms => new Promise(resolve => setTimeout(resolve, ms));

        // --- Email Data (Simplified) ---
        const sampleEmails = [
            { subject: "Tour Booking Inquiry", sender: "guest@email.com", relevant: true },
            { subject: "Re: Question about availability", sender: "traveler@mail.net", relevant: true },
            { subject: "FW: Marketing Newsletter", sender: "promo@events.org", relevant: false },
            { subject: "Need to reschedule my trip", sender: "customer@web.com", relevant: true },
            { subject: "SPAM: Win a Free Cruise!", sender: "winner@contest.biz", relevant: false },
            { subject: "Partnership Opportunity", sender: "corp@business.io", relevant: false },
            { subject: "Confirmation: Your Tour Details", sender: "bookings@romiax.com", relevant: true },
        ];

        // --- Create Email Element ---
        function createEmailElement(emailData) {
            const emailEl = document.createElement('div');
            emailEl.classList.add('email-item');
            emailEl.id = `email-${emailIdCounter++}`;
            emailEl.dataset.relevant = emailData.relevant;

            const iconSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            iconSvg.setAttribute('viewBox', '0 0 24 24');
            const iconPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');

            if (emailData.relevant) {
                emailEl.classList.add('relevant');
                iconPath.setAttribute('d', 'M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'); // Checkmark
                iconSvg.style.color = 'var(--primary-color)';
            } else {
                emailEl.classList.add('irrelevant');
                iconPath.setAttribute('d', 'M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z'); // Spam/Warning
                iconSvg.style.color = 'var(--filtered-color)';
            }
            iconSvg.appendChild(iconPath);

            emailEl.innerHTML = `
                <div class="email-icon"></div>
                <div class="email-details">
                    <div class="email-subject">${emailData.subject}</div>
                    <div class="email-sender">${emailData.sender}</div>
                </div>
            `;
            emailEl.querySelector('.email-icon').appendChild(iconSvg);

            emailEl.style.opacity = '0';
            emailEl.style.top = '10px'; // Start near the top

            elements.processingArea.appendChild(emailEl);
            return emailEl;
        }

        // --- Manage List Display & Limits ---
        function addEmailToList(emailEl, listElement, listArray, limit) {
             emailEl.style.position = 'relative';
             emailEl.style.left = 'auto';
             emailEl.style.top = 'auto';
             emailEl.style.transform = 'none';
             emailEl.style.opacity = listElement === elements.filteredColumn ? '0.7' : '1'; // Dim if filtered
             emailEl.style.transition = 'opacity 0.4s ease-out';

             listElement.insertBefore(emailEl, listElement.children[1]);
             listArray.push(emailEl);

             if (listArray.length > limit) {
                 const oldestEmail = listArray.shift();
                 oldestEmail.style.opacity = '0';
                 setTimeout(() => oldestEmail.remove(), 400);
             }
        }

         // --- Show Avatar Status ---
         function showAvatarStatus(statusType) {
             elements.aiAvatar.classList.remove('scanning', 'accept', 'reject'); // Clear previous states
             elements.avatarStatusOverlay.innerHTML = ICONS[statusType]; // Set icon
             elements.aiAvatar.classList.add(statusType); // Add class for border and overlay visibility

             // Remove status after a delay
             setTimeout(() => {
                 elements.aiAvatar.classList.remove(statusType);
             }, CONFIG.scanTime * 0.8); // Keep status visible for most of the scan time duration
         }


        // --- Animation Sequence ---
        async function processEmailFlow() {
            const emailData = sampleEmails[Math.floor(Math.random() * sampleEmails.length)];
            const emailEl = createEmailElement(emailData);
            const isRelevant = emailData.relevant;

            processedCount++;
            elements.processedCounter.textContent = processedCount;

            // 1. Animate Arrival to Avatar
            await delay(50);
            emailEl.classList.add('entering'); // Trigger animation to avatar position
            emailEl.style.opacity = '1';

            await delay(CONFIG.timeToAvatar); // Wait for arrival

            // 2. Scanning Phase
            emailEl.classList.remove('entering');
            emailEl.classList.add('scanning'); // Keep near avatar
            elements.aiAvatar.classList.add('scanning'); // Start avatar pulse
            await delay(CONFIG.scanTime);
            elements.aiAvatar.classList.remove('scanning'); // Stop pulse

            // 3. Decision Flash & Pause
            showAvatarStatus(isRelevant ? 'accept' : 'reject'); // Show check or cross on avatar
            await delay(CONFIG.decisionPause);

            // 4. Routing
            emailEl.classList.remove('scanning');
            if (isRelevant) {
                // Move Down to Actionable List
                relevantCount++;
                elements.relevantCounter.textContent = relevantCount;
                emailEl.classList.add('accepted'); // Trigger downward movement
                await delay(CONFIG.moveToInboxTime / 2); // Wait part way

                addEmailToList(emailEl, elements.actionableColumn, actionableEmails, CONFIG.maxActionableEmails);

            } else {
                // Deflect Sideways to Filtered List
                filteredCount++;
                elements.filteredCounter.textContent = filteredCount;
                emailEl.classList.add('rejected'); // Trigger sideways movement & fade
                elements.filteredColumn.classList.add('flash'); // Flash background

                await delay(CONFIG.rejectTime); // Wait for animation

                 addEmailToList(emailEl, elements.filteredColumn, filteredEmails, CONFIG.maxFilteredEmails);
                 setTimeout(() => elements.filteredColumn.classList.remove('flash'), 100);
            }
        }

        // --- Start Loop ---
        function startAnimation() {
            elements.processedCounter.textContent = processedCount;
            elements.relevantCounter.textContent = relevantCount;
            elements.filteredCounter.textContent = filteredCount;

            setInterval(processEmailFlow, CONFIG.spawnInterval);
            processEmailFlow(); // Start first one
        }

        // --- Initialize ---
        document.addEventListener('DOMContentLoaded', startAnimation);

    </script>
</body>
</html>
