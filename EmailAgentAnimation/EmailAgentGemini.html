<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Email Automation - RomAIx (Paper Plane Send)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Open Sans', sans-serif; background-color: #ffffff; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden; }
        .post-container { width: 1080px; height: 1080px; position: relative; overflow: hidden; background: linear-gradient(135deg, #587C74, #2F3E46); display: flex; justify-content: center; align-items: center; }
        .laptop-mockup { width: 880px; height: 650px; position: relative; perspective: 1500px; transform-style: preserve-3d; transform: rotateX(5deg) rotateY(0deg); }
        .laptop-screen { width: 880px; height: 620px; background-color: #1a1a1a; border-radius: 20px 20px 0 0; padding: 15px 15px 25px 15px; position: relative; transform-style: preserve-3d; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); }
        .laptop-screen::after { content: ''; position: absolute; width: 880px; height: 620px; background: rgba(255, 255, 255, 0.05); border-radius: 20px 20px 0 0; top: 0; left: 0; transform: translateZ(2px); pointer-events: none; }
        .laptop-base { width: 920px; height: 30px; background: linear-gradient(to bottom, #333, #1a1a1a); position: absolute; top: 620px; left: -20px; transform: rotateX(80deg); transform-origin: top; border-radius: 0 0 10px 10px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4); }
        .display { width: 100%; height: 100%; background-color: #f9f9f9; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; position: relative; }
        .email-header { width: 100%; height: 60px; background: linear-gradient(to right, #2F3E46, #587C74); padding: 0 20px; display: flex; align-items: center; justify-content: space-between; color: white; font-weight: 600; border-bottom: 1px solid rgba(0,0,0,0.1); }
        .email-header-title { font-size: 18px; }
        .email-toolbar { display: flex; gap: 15px; }
        .toolbar-icon { width: 24px; height: 24px; border-radius: 50%; background-color: rgba(255, 255, 255, 0.2); }
        .email-sidebar { width: 180px; height: calc(100% - 60px); background-color: rgba(241, 242, 242, 0.5); border-right: 1px solid rgba(0,0,0,0.05); padding: 20px 0; position: absolute; top: 60px; z-index: 1; }
        .sidebar-item { padding: 12px 20px; font-size: 14px; color: rgba(85, 85, 85, 0.8); display: flex; align-items: center; gap: 10px; position: relative; }
        .sidebar-item-active { background-color: rgba(88, 124, 116, 0.15); color: #2F3E46; font-weight: 600; }
        .sidebar-item-icon { width: 16px; height: 16px; border-radius: 4px; background-color: rgba(88, 124, 116, 0.3); }
        .notification { width: 18px; height: 18px; background-color: #e74c3c; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: 700; position: absolute; right: 15px; opacity: 0; transition: opacity 0.5s ease; }
        .email-content { margin-left: 180px; height: calc(100% - 60px); display: flex; flex-direction: column; /* Make sure it's a flex container */ }
        .email-message { padding: 25px 30px; flex-grow: 1; overflow-y: auto; opacity: 0; transition: opacity 1s ease; position: relative; }
        .email-subject { font-size: 22px; font-weight: 700; color: #2F3E46; margin-bottom: 20px; }
        .email-meta { display: flex; align-items: center; margin-bottom: 25px; gap: 15px; }
        .sender-avatar { width: 40px; height: 40px; border-radius: 50%; background-color: #f1f2f2; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #2F3E46; border: 1px solid rgba(0,0,0,0.1); }
        .sender-info { font-size: 14px; }
        .sender-name { font-weight: 600; color: #2F3E46; }
        .sender-email { color: #777; }
        .sender-time { color: #999; font-size: 12px; margin-left: auto; }
        .email-body { font-size: 16px; line-height: 1.6; color: #333; margin-bottom: 30px; }
        .email-reply { background-color: #f1f2f2; border-radius: 12px; padding: 20px; font-size: 16px; line-height: 1.6; color: #333; margin-bottom: 20px; position: relative; opacity: 0; transition: opacity 0.5s ease-out; /* Only transition opacity now */ }
        .email-reply.visible { opacity: 1; }
        .reply-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .ai-avatar { width: 30px; height: 30px; border-radius: 50%; background: linear-gradient(to bottom right, #2F3E46, #587C74); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 12px; }
        .ai-tag { font-size: 12px; background-color: rgba(88, 124, 116, 0.15); color: #2F3E46; padding: 3px 8px; border-radius: 4px; font-weight: 600; }
        .reply-text { min-height: 80px; }
        .cursor { display: inline-block; width: 2px; height: 16px; background-color: #333; animation: blink 1s infinite; margin-left: 2px; vertical-align: text-bottom; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        .email-composer { height: 60px; padding: 10px 30px; border-top: 1px solid rgba(0,0,0,0.1); display: flex; align-items: center; gap: 15px; background: #f9f9f9; /* Match display bg */ }
        .composer-input { flex-grow: 1; height: 40px; border-radius: 20px; border: 1px solid rgba(0,0,0,0.1); background-color: #f1f2f2; padding: 0 15px; font-size: 14px; color: #999; display: flex; align-items: center; }
        .send-button { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(to bottom right, #2F3E46, #587C74); display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .send-icon { width: 18px; height: 18px; background-color: rgba(255, 255, 255, 0.8); clip-path: polygon(0% 0%, 100% 50%, 0% 100%); }
        .logo { position: absolute; bottom: 40px; right: 40px; display: flex; align-items: center; gap: 12px; color: white; font-weight: 700; font-size: 20px; }
        .logo-icon { width: 40px; height: 40px; background-color: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; color: #2F3E46; }
        .approval-section { display: flex; justify-content: flex-end; margin-top: 15px; }
        .approve-btn { background: linear-gradient(to right, #2F3E46, #587C74); color: white; border: none; border-radius: 6px; padding: 10px 20px; font-weight: 600; font-size: 14px; cursor: pointer; display: none; transition: all 0.2s ease; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15); }
        .approve-btn:hover { background: linear-gradient(to right, #3a4f5a, #6b9b91); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); transform: translateY(-1px); }
        .approve-btn:active { background: linear-gradient(to right, #2F3E46, #587C74); box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2); transform: translateY(1px); }

        /* --- Sending Indicator Styles --- */
        .sending-indicator {
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 30px; /* Add padding for space */
            margin-top: 20px; /* Space above composer */
            margin-bottom: auto; /* Push to bottom of flex space if needed */
            text-align: center;
            opacity: 0; /* Start faded out */
            transition: opacity 0.3s ease-in;
            min-height: 150px; /* Ensure space for animation */
        }
        .sending-indicator.show {
            display: flex; /* Use flex to align items */
            opacity: 1;
        }
        .sending-text {
            font-size: 16px;
            color: #555;
            font-weight: 600;
        }
        .paper-plane {
            width: 0;
            height: 0;
            border-left: 12px solid transparent;
            border-right: 12px solid transparent;
            border-bottom: 20px solid #587C74; /* Theme color */
            transform: rotate(-45deg); /* Initial angle */
            opacity: 0; /* Start invisible until shown */
        }
        .sending-indicator.show .paper-plane {
            opacity: 1; /* Become visible */
            animation: fly-off 1.5s ease-in forwards 0.1s; /* Start animation shortly after show */
        }
        @keyframes fly-off {
            0% { transform: translate(0, 0) rotate(-45deg); opacity: 1; }
            20% { transform: translate(20px, -15px) rotate(-45deg); opacity: 1; } /* Slight initial move */
            100% { transform: translate(200px, -100px) rotate(-25deg); opacity: 0; } /* Fly further up/right */
        }
         /* --- End Sending Indicator --- */

    </style>
</head>
<body>
    <div class="post-container">
        <div class="laptop-mockup">
            <div class="laptop-screen">
                <div class="display">
                    <div class="email-header">
                        <div class="email-header-title">Tour Guide Assistant</div>
                        <div class="email-toolbar">
                            <div class="toolbar-icon"></div>
                            <div class="toolbar-icon"></div>
                            <div class="toolbar-icon"></div>
                        </div>
                    </div>
                    <div class="email-sidebar">
                        <div class="sidebar-item sidebar-item-active">
                            <div class="sidebar-item-icon"></div>
                            Inbox
                            <div class="notification" id="inbox-notification">1</div>
                        </div>
                        <div class="sidebar-item">
                            <div class="sidebar-item-icon"></div>
                            Sent
                            <div class="notification" id="sent-notification">1</div>
                        </div>
                         <div class="sidebar-item">
                            <div class="sidebar-item-icon"></div>
                            Drafts
                            <div class="notification" id="drafts-notification">1</div>
                        </div>
                    </div>
                    <div class="email-content">
                        <div class="email-message" id="email-message"> <div class="email-subject">Question about sunset cruise availability</div>
                            <div class="email-meta">
                                <div class="sender-avatar">JD</div>
                                <div class="sender-info">
                                    <div class="sender-name">John Doe</div>
                                    <div class="sender-email">john.doe@example.com</div>
                                </div>
                                <div class="sender-time">Today, 10:32 AM</div>
                            </div>
                            <div class="email-body">
                                Hi,<br><br>
                                Do you have sunset cruises for 6 people next month? Any special packages?<br><br>
                                Thanks,<br>
                                John
                            </div>
                            <div class="email-reply" id="email-reply">
                                <div class="reply-header">
                                    <div class="ai-avatar">AI</div>
                                    <div class="ai-tag">AI Assistant</div>
                                </div>
                                <div class="reply-text" id="reply-text"></div>
                                <div class="approval-section">
                                    <button class="approve-btn" id="approve-btn">Approve</button>
                                </div>
                            </div>
                             <div class="sending-indicator" id="sending-indicator">
                                <div class="paper-plane"></div>
                                <div class="sending-text">Sending email...</div>
                            </div>
                        </div>
                         <div class="email-composer">
                            <div class="composer-input">AI Assistant has responded to this email...</div>
                            <div class="send-button">
                                <div class="send-icon"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="laptop-base"></div>
        </div>
        <div class="logo">
            <div class="logo-icon">R</div>
            RomAIx
        </div>
    </div>

    <script>
        // --- Approval Process Function (Simulates Sending) ---
        function approveEmail() {
            console.log('approveEmail function called (auto-triggered)');
            const emailReply = document.getElementById('email-reply');
            const sendingIndicator = document.getElementById('sending-indicator');
            const draftsNotification = document.getElementById('drafts-notification');
            const sentNotification = document.getElementById('sent-notification');
            const approveBtn = document.getElementById('approve-btn');

            if (!emailReply || !sendingIndicator || !draftsNotification || !sentNotification || !approveBtn) {
                console.error('One or more elements not found for approval process.');
                return;
            }

            // 1. Briefly simulate button press
            approveBtn.classList.add('active');
            setTimeout(() => approveBtn.classList.remove('active'), 150);

            // 2. Instantly hide the reply and button
            console.log('Hiding reply and button');
            emailReply.style.display = 'none'; // Hide reply immediately
            approveBtn.style.display = 'none'; // Hide button immediately

            // 3. Show the sending indicator (triggers CSS fade-in and plane animation)
            console.log('Showing sending indicator...');
            sendingIndicator.classList.add('show');

            // 4. Set timeout for the duration of the sending phase (plane animation is 1.5s)
            const sendingDuration = 1600; // Match plane animation + small buffer
            console.log(`Waiting ${sendingDuration}ms for sending animation...`);

            setTimeout(function() {
                console.log('Send animation finished. Hiding indicator and updating notifications...');

                // 5. Hide the sending indicator
                sendingIndicator.classList.remove('show');

                 // 6. Fade out Drafts notification
                draftsNotification.style.opacity = '0';

                // 7. Fade in Sent notification (add slight delay for indicator to fade out)
                setTimeout(() => {
                    sentNotification.style.opacity = '1';
                    console.log('Approval/Send process finished.');
                }, 300); // Delay after hiding indicator

            }, sendingDuration);
        }

        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded and parsed');

            // --- Get Element References ---
            const replyText = document.getElementById('reply-text');
            const cursor = document.createElement('span');
            cursor.className = 'cursor';
            const emailContent = document.getElementById('email-message'); // Corrected ID if changed in HTML
            const emailReply = document.getElementById('email-reply');
            const approveBtn = document.getElementById('approve-btn');
            const inboxNotification = document.getElementById('inbox-notification');
            const draftsNotification = document.getElementById('drafts-notification');
            const sentNotification = document.getElementById('sent-notification');
            const sendingIndicator = document.getElementById('sending-indicator'); // Ref for sending indicator

            // Check elements exist
            if (!approveBtn) console.error('Approve button not found!');
            if (!replyText) console.error('Reply text element not found!');
            if (!emailReply) console.error('Email reply container not found!');
            if (!sendingIndicator) console.error('Sending indicator not found!');

            // Ensure Sent notification & indicator start hidden
            if(sentNotification) sentNotification.style.opacity = '0';
            // Sending indicator uses display:none in CSS initially

            // AI response text
            const response = `Hi John! ✨

Yes! We have sunset cruises for 6 next month. 🌅

• Ocean views 🌊
• Live music 🎵
• Gourmet dinner 🍽️
• 15% family discount 💰

Would you like me to check specific dates? 📅

Best,
Tour Guide Assistant`;

            let i = 0;
            let speed = 30;

            // --- Animation Sequence ---
            console.log('Starting animation sequence...');
            setTimeout(function() {
                console.log('Showing inbox notification...');
                if(inboxNotification) inboxNotification.style.opacity = '1';

                setTimeout(function() {
                    console.log('Fading in email content...');
                    if(emailContent) emailContent.style.opacity = '1';

                    setTimeout(function() {
                        console.log('Fading in email reply container...');
                        if(emailReply) emailReply.classList.add('visible');

                        setTimeout(function() {
                            console.log('Starting typewriter animation...');
                            if (replyText) {
                                replyText.innerHTML = '';
                                replyText.appendChild(cursor);
                                typeWriter();
                            }
                        }, 1000); // Delay before typing starts

                    }, 1500); // Delay before reply container appears

                }, 1000); // Delay before original email appears

            }, 500); // Initial delay


            // Function to simulate typing effect
            function typeWriter() {
                if (i < response.length) {
                    if (replyText.contains(cursor)) { replyText.removeChild(cursor); }
                    if (response.charAt(i) === '\n') { replyText.innerHTML += '<br>'; }
                    else { replyText.innerHTML += response.charAt(i); }
                    i++;
                    replyText.appendChild(cursor);
                    setTimeout(typeWriter, speed);
                } else {
                     // --- Typing Finished ---
                    console.log('Typing finished.');
                    if (replyText.contains(cursor)) { replyText.removeChild(cursor); }

                    // --- Show Drafts notification and Approve button ---
                    setTimeout(function() {
                        console.log('Showing Drafts notification and Approve button...');
                        if(draftsNotification) draftsNotification.style.opacity = '1';
                        if(approveBtn) approveBtn.style.display = 'block'; // Make button visible

                        // *** ---> Auto-trigger approval after 2 seconds <--- ***
                        console.log('Setting timer for auto-approval (2 seconds)...');
                        setTimeout(function() {
                            console.log('Timer finished. Auto-triggering approval process...');
                            approveEmail(); // Call the approval/send function automatically
                        }, 2000); // 2-second delay

                    }, 500); // Delay after typing finishes
                }
            }
        });
    </script>
</body>
</html>