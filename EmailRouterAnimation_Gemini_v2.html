<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Email Router Animation V2 - RomAIx</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            /* --- PLACE YOUR BACKGROUND IMAGE URL HERE --- */
            background-image: url('YOUR_BACKGROUND_IMAGE.png'); /* <--- CHANGE THIS PATH */
            /* --- --- --- --- --- --- --- --- --- --- --- */
            background-color: #eef2f5; /* Fallback color */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            color: #333;
        }

        .animation-container {
            width: 95%;
            max-width: 900px; /* Slightly wider */
            height: 650px;  /* Taller to fit elements comfortably */
            background-color: rgba(255, 255, 255, 0.9); /* Slightly more opaque */
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            padding: 30px;
            overflow: hidden;
        }

        /* Common styles for Router and Incoming Source */
        .node {
            position: absolute;
            background: linear-gradient(to right, #e0e0e0, #f5f5f5);
            color: #444;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            z-index: 5;
             min-width: 160px;
             justify-content: center;
        }
         .node .icon { font-size: 22px; }
         .node .text { font-weight: 600; font-size: 14px; }

         .incoming-source {
             top: 50%;
             left: 5%; /* Closer to edge */
             transform: translateY(-50%);
         }

        .router-agent {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #2F3E46, #587C74); /* Keep original gradient */
            color: white;
            z-index: 10;
            min-width: 180px;
        }
         .router-agent.processing {
             animation: pulse 1s infinite;
         }
         .router-agent .icon { font-size: 24px; }


        /* Specialized Agent Styles (Circular) */
        .specialized-agent {
            position: absolute;
            width: 110px;  /* Diameter */
            height: 110px; /* Diameter */
            border-radius: 50%; /* Make it round */
            background: linear-gradient(135deg, #a7b4bc, #dde4e9); /* Lighter gradient for avatar background */
            color: #2F3E46; /* Dark text */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column; /* Stack icon and text vertically */
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 5px; /* Space between icon and text */
            padding: 10px;
            z-index: 5;
             transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
         .specialized-agent .icon {
             font-size: 30px; /* Larger icon */
             /* If using images:
             width: 50px; height: 50px; border-radius: 50%; background-size: cover; background-position: center;
             */
         }
         .specialized-agent .text {
             font-weight: 600;
             font-size: 13px;
             line-height: 1.2;
         }

         .specialized-agent.highlight {
             animation: highlight-pulse 0.8s ease;
             box-shadow: 0 0 25px rgba(88, 124, 116, 0.5); /* More prominent shadow on highlight */
         }

        /* Positioning the agents */
        .sales-agent {
            top: 15%;    /* Position higher */
            right: 10%;
        }

        .support-agent {
            top: 50%;   /* Center vertically */
            right: 10%;
            transform: translateY(-50%); /* Exact vertical center */
        }

        .manager-agent {
            bottom: 15%; /* Position lower */
            right: 10%;
        }


        /* Email Icon */
        .email-icon-container {
            position: absolute;
            opacity: 0;
            transition: top 1.5s ease-in-out, left 1.5s ease-in-out, opacity 0.5s ease;
            z-index: 20;
            display: flex;
            flex-direction: column; /* Stack email and text */
            align-items: center;
            /* Start position near the incoming source */
            top: calc(50% - 30px); /* Adjust based on total height */
            left: calc(5% + 90px); /* Center of incoming source */
        }

        .email-icon {
            font-size: 30px;
        }

        .email-context-text {
            font-size: 11px;
            font-weight: 600;
            color: #fff;
            background-color: rgba(47, 62, 70, 0.8); /* Semi-transparent dark */
            padding: 3px 8px;
            border-radius: 4px;
            margin-top: 5px;
            white-space: nowrap; /* Prevent wrapping */
            opacity: 0;
             transition: opacity 0.4s ease 0.2s; /* Fade in slightly after email appears */
        }
         .email-icon-container.visible .email-context-text {
             opacity: 1;
         }


        /* Arrow Styles (Basic CSS Triangles) */
        .arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 1; /* Behind email icon */
            pointer-events: none;
        }

        #arrow-to-router {
            /* Position between incoming and router */
            left: calc(5% + 160px + 10px); /* End of incoming + gap */
            top: 50%;
            transform: translateY(-50%);
            border-width: 8px 0 8px 14px; /* Left pointing triangle */
            border-color: transparent transparent transparent #587C74; /* Arrow color */
        }

        #arrow-to-sales {
            /* Position between router and sales */
            left: calc(50% + 90px + 10px); /* End of router + gap */
            top: calc(15% + 55px);       /* Align vertically with sales */
            transform: translateY(-50%);
             border-width: 8px 0 8px 14px; /* Left pointing triangle */
            border-color: transparent transparent transparent #88a09e;
        }
        #arrow-to-support {
            left: calc(50% + 90px + 10px);
            top: 50%; /* Align vertically */
            transform: translateY(-50%);
             border-width: 8px 0 8px 14px;
             border-color: transparent transparent transparent #88a09e;
        }
        #arrow-to-manager {
            left: calc(50% + 90px + 10px);
            top: calc(85% - 55px); /* Align vertically */
            transform: translateY(-50%);
             border-width: 8px 0 8px 14px;
             border-color: transparent transparent transparent #88a09e;
        }

        .arrow.visible {
            opacity: 0.6; /* Make arrows slightly transparent */
        }


        /* Keyframe Animations */
        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
            50% { transform: translate(-50%, -50%) scale(1.05); box-shadow: 0 6px 20px rgba(47, 62, 70, 0.3); }
            100% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
        }
         /* Updated highlight for round agents */
         @keyframes highlight-pulse {
             0% { transform: scale(1) translateY(0); /* Base Y determined by class */ box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15); }
             50% { transform: scale(1.08) translateY(0); box-shadow: 0 0 25px rgba(88, 124, 116, 0.5); }
             100% { transform: scale(1) translateY(0); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15); }
         }
         /* Specific adjustments for centered support agent during highlight */
         .support-agent.highlight {
            animation-name: highlight-pulse-support;
         }
         @keyframes highlight-pulse-support {
             0% { transform: scale(1) translateY(-50%); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15); }
             50% { transform: scale(1.08) translateY(-50%); box-shadow: 0 0 25px rgba(88, 124, 116, 0.5); }
             100% { transform: scale(1) translateY(-50%); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15); }
         }


         /* RomAIx Logo */
         .romix-logo {
             position: absolute;
             bottom: 15px;
             left: 20px;
             display: flex;
             align-items: center;
             gap: 8px;
             color: #2F3E46;
             font-weight: 700;
             font-size: 16px;
             opacity: 0.8;
              z-index: 1;
         }
         .romix-logo-icon {
             width: 30px;
             height: 30px;
             background-color: #2F3E46;
             border-radius: 6px;
             display: flex;
             align-items: center;
             justify-content: center;
             font-size: 14px;
             color: white;
         }

    </style>
</head>
<body>
    <div class="animation-container">

        <div class="node incoming-source">
            <span class="icon">📥</span>
            <span class="text">Incoming Email</span>
        </div>

        <div class="node router-agent" id="router">
            <span class="icon">🧠</span>
            <span class="text">AI Router</span>
        </div>

        <div class="specialized-agent sales-agent" id="sales-agent">
            <span class="icon">📈</span> <span class="text">Sales Agent</span>
        </div>
        <div class="specialized-agent support-agent" id="support-agent">
            <span class="icon">🛠️</span> <span class="text">Support Agent</span>
        </div>
         <div class="specialized-agent manager-agent" id="manager-agent">
            <span class="icon">🧑‍💼</span> <span class="text">Manager</span>
        </div>


        <div class="email-icon-container" id="email-container">
             <div class="email-icon">📧</div>
             <div class="email-context-text" id="email-context">Routing...</div>
        </div>

        <div class="arrow" id="arrow-to-router"></div>
        <div class="arrow" id="arrow-to-sales"></div>
        <div class="arrow" id="arrow-to-support"></div>
        <div class="arrow" id="arrow-to-manager"></div>


        <div class="romix-logo">
             <div class="romix-logo-icon">R</div>
             RomAIx
         </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const emailContainer = document.getElementById('email-container');
            const emailContext = document.getElementById('email-context');
            const router = document.getElementById('router');
            const incomingSource = document.querySelector('.incoming-source'); // Reference for starting point

            // Agent and Arrow elements
            const agents = [
                { element: document.getElementById('sales-agent'), arrow: document.getElementById('arrow-to-sales'), context: "Sales Inquiry" },
                { element: document.getElementById('support-agent'), arrow: document.getElementById('arrow-to-support'), context: "Support Request" },
                { element: document.getElementById('manager-agent'), arrow: document.getElementById('arrow-to-manager'), context: "Complaint Escalation" }
            ];
            const arrowToRouter = document.getElementById('arrow-to-router');

            let currentTargetAgentIndex = 0;

            // --- Animation Configuration ---
            const timings = {
                initialDelay: 500,         // Wait before starting first cycle
                showEmailDelay: 200,       // Wait before showing email
                moveToRouterDuration: 1500,// Time to move to router
                processingDelay: 1000,     // How long router "thinks"
                moveToAgentDuration: 1500, // Time to move to specialist
                highlightDelay: 800,       // How long specialist stays highlighted
                cycleDelay: 2000          // Wait before starting next cycle
            };
            // --- End Configuration ---

            function getCenterPosition(element) {
                 // Recalculate on demand as layout might shift slightly
                 const rect = element.getBoundingClientRect();
                 const containerRect = element.closest('.animation-container').getBoundingClientRect();
                 const left = rect.left - containerRect.left + (rect.width / 2);
                 const top = rect.top - containerRect.top + (rect.height / 2);
                 return { left, top };
            }

             function hideAllArrows() {
                 arrowToRouter.classList.remove('visible');
                 agents.forEach(agent => agent.arrow.classList.remove('visible'));
             }

            function runAnimationCycle() {
                 // 0. Setup for the current cycle
                 const targetAgentInfo = agents[currentTargetAgentIndex];
                 const targetAgentElement = targetAgentInfo.element;
                 const targetArrowElement = targetAgentInfo.arrow;
                 const currentEmailContext = targetAgentInfo.context;

                 const startPos = getCenterPosition(incomingSource);
                 const routerPos = getCenterPosition(router);
                 const agentPos = getCenterPosition(targetAgentElement);

                 // Calculate starting position for the container (adjust for container height)
                 const emailContainerHeight = emailContainer.offsetHeight || 60; // Estimate height if not rendered
                 const startTop = startPos.top - (emailContainerHeight / 2);
                 const startLeft = startPos.left + (incomingSource.offsetWidth / 2) - (emailContainer.offsetWidth / 2); // Center horizontally relative to source


                 // 1. Reset and Prepare Email
                 emailContainer.style.opacity = '0';
                 emailContainer.style.transition = 'none';
                 emailContainer.style.left = `${startLeft}px`;
                 emailContainer.style.top = `${startTop}px`;
                 emailContext.textContent = currentEmailContext; // Set text before showing
                 hideAllArrows(); // Ensure all arrows are hidden initially
                 emailContainer.classList.remove('visible'); // Hide context text


                 // Short delay to apply reset styles before starting animation
                 setTimeout(() => {
                     emailContainer.style.transition = `top ${timings.moveToRouterDuration}ms ease-in-out, left ${timings.moveToRouterDuration}ms ease-in-out, opacity 0.5s ease`;
                     emailContainer.style.opacity = '1';
                     emailContainer.classList.add('visible'); // Make context text visible
                     arrowToRouter.classList.add('visible'); // Show arrow to router

                     // 2. Move Email to Router
                     // Adjust target position to center the container
                     const targetRouterLeft = routerPos.left - (emailContainer.offsetWidth / 2);
                     const targetRouterTop = routerPos.top - (emailContainer.offsetHeight / 2);
                     emailContainer.style.left = `${targetRouterLeft}px`;
                     emailContainer.style.top = `${targetRouterTop}px`;

                 }, timings.showEmailDelay);


                 // 3. Router Processing Animation
                 setTimeout(() => {
                     router.classList.add('processing');
                     arrowToRouter.classList.remove('visible'); // Hide arrow to router
                 }, timings.showEmailDelay + timings.moveToRouterDuration);


                 // 4. Move Email to Target Agent & Stop Router Processing
                 setTimeout(() => {
                     router.classList.remove('processing');
                     targetArrowElement.classList.add('visible'); // Show arrow to specific agent
                     emailContainer.style.transition = `top ${timings.moveToAgentDuration}ms ease-in-out, left ${timings.moveToAgentDuration}ms ease-in-out, opacity 0.5s ease`;

                     // Adjust target position for agent
                     const targetAgentLeft = agentPos.left - (emailContainer.offsetWidth / 2);
                     const targetAgentTop = agentPos.top - (emailContainer.offsetHeight / 2);
                     emailContainer.style.left = `${targetAgentLeft}px`;
                     emailContainer.style.top = `${targetAgentTop}px`;

                 }, timings.showEmailDelay + timings.moveToRouterDuration + timings.processingDelay);


                 // 5. Highlight Target Agent & Hide Email/Arrow
                 setTimeout(() => {
                     emailContainer.style.opacity = '0';
                     emailContainer.classList.remove('visible'); // Hide context text
                     targetArrowElement.classList.remove('visible'); // Hide agent arrow
                     targetAgentElement.classList.add('highlight');
                 }, timings.showEmailDelay + timings.moveToRouterDuration + timings.processingDelay + timings.moveToAgentDuration);


                 // 6. Remove Highlight
                 setTimeout(() => {
                    targetAgentElement.classList.remove('highlight');
                 }, timings.showEmailDelay + timings.moveToRouterDuration + timings.processingDelay + timings.moveToAgentDuration + timings.highlightDelay);


                 // 7. Prepare for Next Cycle
                 setTimeout(() => {
                     currentTargetAgentIndex = (currentTargetAgentIndex + 1) % agents.length; // Cycle through 0, 1, 2
                     runAnimationCycle(); // Loop
                 }, timings.showEmailDelay + timings.moveToRouterDuration + timings.processingDelay + timings.moveToAgentDuration + timings.highlightDelay + timings.cycleDelay);
            }

            // Start the first cycle after an initial delay
            setTimeout(runAnimationCycle, timings.initialDelay);
        });
    </script>
</body>
</html>